# Static website

This is a static website that displays the content of the API. It allows a user to create, read, update and delete blogs
as well as create and read comments.

![Static website screenshot](../figures/static.png)

## Website

The [index.html](./src/index.html) file serves as the foundational structure for the website, however, the actual HTML
elements are dynamically generated by the  [script.js](./src/script.js) file. This JavaScript file handles all API
interactions, including fetching, creating, and deleting data. It also updates the website's content in real-time based
on the responses from these API requests. The website also periodically polls the API to check for new data. The styling
is done using TailwindCSS
The data is fetched using the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API).

## Build

First you need to build the docker images with this command:

```bash
docker build -t dai/frontend .
```

Before running the image, you need to launch to the API, see at [README.md](../api/README.md) how to do it.

Then you can run the image:

```bash
docker run -d -p 80:80 dai/frontend
```

The API's URL can be modified through the environment variable 'APIURL'. If not specified, it defaults
to "https://api.traefik.me":

```bash
docker run -e "APIURL=http://example.com" -d -p 80:80 dai/frontend
```

The image is build in two stages. This method is
called [multi-stage builds](https://docs.docker.com/build/building/multi-stage/). The first stage
uses [Node.js](https://nodejs.org/en) to build the CSS for the website using [TailwindCSS](https://tailwindcss.com/).
Through PostCSS, Tailwind tailors the final stylesheet to include only what actually is used in
the [index.css](./src/index.css) file. This build stage also copies all the files to the `static` folder.

The second step creates a Nginx container and statically serves the documents from the `static` folder.

## Configuration

### Nginx

The configuration of Nginx can be modified at [nginx.conf](./conf/nginx.conf). The current configuration is the
following:

```nginx configuration
events {}
http {
    server {
        listen 80;
        root /usr/share/nginx/html;
      
        location / {
           index index.html;
        }

        include /etc/nginx/mime.types;

        gzip on;
        gzip_comp_level 5;
        gzip_types text/plain text/css text/javascript;
   }
}
```

The events option is used to set global options that affect how Nginx handles connections.
The Http block is used to set options that affect HTTP connections. The listen directive is used to specify the port on
which Nginx will listen for connections. The location directive is used to specify the location of the root directory.
The include directive tells Nginx to add the mime types to the configuration. The gzip directive enables compression.

### TailwindCSS

Tailwind uses NodeJS and PostCSS to build the CSS. The css can be built using the `npm run build` command. The full
configuration can be found at [tailwind.config.js](./src/tailwind.config.js), see
the [TailwindCSS doc](https://v2.tailwindcss.com/docs).